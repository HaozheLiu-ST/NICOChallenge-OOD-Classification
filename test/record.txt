Track 1 


CUDA_VISIBLE_DEVICES=4 python3 offline_evaluation_track.py \
--arch resnet50 \
--out NICO-resnet50-track1_full_data_augmix_224_mix_5_lam0.01_90_epoch \
--track track1 \
--cfg mixinginference \
--model_path /apdcephfs/share_1290796/haozheliu/NICO/ckpts/epoch_90_full_data_augmix_224/NICO-resnet50-track1/model_best_in_090_epochs.pth.tar \

CUDA_VISIBLE_DEVICES=1 python3 offline_evaluation_track.py \
--arch resnet34 \
--out NICO-resnet34_full_data_SepMixing_MOCO_FDG_512_Ensemble_student_bestin90_180_ \
--track track1 \
--cfg None \
--model_path /apdcephfs/share_1290796/waltszhang/NICO_challenge/train/ckpts/epoch_180_AugMix_DecoupleMix_MOCO_pretrained_FDG_512_lr1e-1_CoseDecay/NICO-resnet34-track1/student/model_best_out_090_epochs.pth.tar



CUDA_VISIBLE_DEVICES=2 python3 offline_evaluation_track.py \
--arch resnet34 \
--out NICO-resnet34_full_data_SepMixing_MOCO_FDG_512_Ensemble_teacher_100_ \
--track track1 \
--cfg None \
--model_path /apdcephfs/share_1290796/waltszhang/NICO_challenge/train/ckpts/epoch_180_AugMix_DecoupleMix_MOCO_pretrained_FDG_512_lr1e-1_CoseDecay/NICO-resnet34-track1/teacher/checkpoint_100.pth.tar


Track 2 


CUDA_VISIBLE_DEVICES=3 python3 offline_evaluation_track.py \
--arch resnet50 \
--out NICO-resnext50_full_data_augmix_1024_mix_5_lam0.01_90 \
--track track2 \
--cfg mixinginference \
--model_path /apdcephfs/share_1290796/haozheliu/NICO/ckpts/epoch_90_full_data_augmix_1024/NICO-resnet50-track2/model_best_in_090_epochs.pth.tar \


CUDA_VISIBLE_DEVICES=1 python3 offline_evaluation_track.py \
--arch resnext50_32x4d \
--out NICO-resnet50d_full_data_SepMixing_448_Ensemble_160_ \
--track track2 \
--cfg None \
--model_path /apdcephfs/share_1290796/haozheliu/NICO/Separate_Mix/ckpts/epoch_180_full_data_SepMixing_448_Ensemble/NICO-resnext50_32x4d-track2/checkpoint_160.pth.tar

CUDA_VISIBLE_DEVICES=1 python3 offline_evaluation_track.py \
--arch resnet34 \
--out NICO-resnet34_full_data_SepMixing_DeepAug_448_Ensemble_best90_ \
--track track2 \
--cfg None \
--model_path /apdcephfs/share_1290796/haozheliu/NICO/Separate_Mix/ckpts/epoch_180_full_data_SepMixing_DeepAug_448_Ensemble/NICO-resnet34-track2/model_best_out_090_epochs.pth.tar 

CUDA_VISIBLE_DEVICES=1 python3 offline_evaluation_track.py \
--arch resnet34 \
--out NICO-resnet34_SepMixing_MOCO_finetune_FDG_512_Ensemble_teacher_60_ \
--track track2 \
--cfg None \
--model_path /apdcephfs/share_1290796/waltszhang/NICO_challenge/train/ckpts/epoch_180_SepMixing_fulldata_MOCO_finetune_FDG_512_Ensemble_lr_1e-1_CoseDecay/NICO-resnet34-track2/teacher/checkpoint_060.pth.tar


CUDA_VISIBLE_DEVICES=0 python3 offline_evaluation_track.py \
--arch resnet34 \
--out NICO-resnet34_SepMixing_MOCO_pretrained_512_Ensemble_teacher_120_ \
--track track2 \
--cfg None \
--model_path /apdcephfs/share_1290796/waltszhang/NICO_challenge/train/ckpts/epoch_180_SepMixing_fulldata_MOCO_pretrained_512_Ensemble_lr_1e-1/NICO-resnet34-track2/checkpoint_120.pth.tar



"""
ensamble
"""

python3 offline_evaluation_track.py \
--track track1 \
--ensamble True \
--file_list './results/track1/NICO-resnet34_full_data_SepMixing_MOCO_FDG_512_Ensemble_teacher_150_81.455382.json,./results/track1/NICO-resnet50_full_data_SepMixing_MOCO_pretrained_512_Ensemble_bestout90_80.477457.json,./results/track1/NICO-resnet34_full_data_SepMixing_pretrained_FDG_512_Ensemble_bestin90_79.00338.json,./results/track1/NICO-resnet34_full_data_SepMixing_448_Ensemble_170_78.54318.json,./results/track1/NICO-resnet50-track1_full_data_74.832818.json,./results/track1/NICO-resnet50-track1_augmix_mix_5_lam0.01_80_epoch_72.934493.json,./results/track1/NICO-resnet50_full_data_SepMixing_448_Ensemble_160_71.668944.json' \
--weights adaptive \
--out 'Ensamble_track1_R34-R50full-R50aug-R50ens-MOCO-FDG_7_0528_adaptive_'



python3 offline_evaluation_track.py \
--track track2 \
--ensamble True \
--file_list './results/track2/NICO-resnet34_SepMixing_MOCO_FDG_512_Ensemble_teacher_bestout90_170_75.05450.json,./results/track2/NICO-resnet34_SepMixing_MOCO_finetune_FDG_512_Ensemble_teacher_bestin90_73.37923.json,./results/track2/NICO-resnet34_SepMixing_FDG_512_Ensemble_bestout90_71.34825.json,./results/track2/NICO-resnet34_full_data_SepMixing_448_Ensemble_170_68.537005.json,./results/track2/NICO-resnet18_full_data_SepMixing_448_Ensemble_best90_64.693058.json,./results/track2/NICO-resnet50_full_data_SepMixing_448_Ensemble_160_62.673551.json,./results/track2/NICO-resnet50d_full_data_SepMixing_448_Ensemble_170_61.881813.json' \
--weights adaptive \
--out 'Ensamble_track2_R34-R18-R50ensemble-R50d-FDG-finetune-moco_7_0527_adaptive_' 






 """
 MOCO pretrained model
 """

 R18


 R34

/apdcephfs/share_1290796/jinhengxie/NICO/train/Scaled-down-self-supervised-learning-main/moco/checkpoints/finetune/224/resnet34_track1/gpus_4_lr_0.03_bs_128_epochs_200_path_train_domain_free/checkpoint_0199.pth.tar

/apdcephfs/share_1290796/jinhengxie/NICO/train/Scaled-down-self-supervised-learning-main/moco/checkpoints/finetune/224/resnet34_track2/gpus_4_lr_0.03_bs_128_epochs_200_path_/checkpoint_0199.pth.tar

R50

/apdcephfs/share_1290796/jinhengxie/NICO/train/Scaled-down-self-supervised-learning-main/moco/checkpoints/finetune/224/resnet50_track1/gpus_4_lr_0.03_bs_128_epochs_200_path_train_domain_free/checkpoint_0199.pth.tar

/apdcephfs/share_1290796/jinhengxie/NICO/train/Scaled-down-self-supervised-learning-main/moco/checkpoints/finetune/224/resnet50_track2/gpus_4_lr_0.03_bs_128_epochs_200_path_/checkpoint_0199.pth.tar



"""
conda environment
"""
cd /root/
bash Anacondaxxxxx.sh
source ~/.bashrc
cp /ap../waltszhang/.condarc /root
conda create -n pytorch1.8 python=3.6
conda activate pytorch1.8
conda install pytorch==1.8.1 torchvision==0.9.1 torchaudio==0.8.1 cudatoolkit=10.2
python -m pip install --upgrade pip
pip install opencv-python
pip install tqdm